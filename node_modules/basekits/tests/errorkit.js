const {errorkit} = require('../dist/basekits.cjs.js')

test('objectify error.', () => {
  const err = new Error('sample error.')
  const obj = errorkit.objectifyError(err)
  expect(obj.hasOwnProperty('stack')).toBe(true)
  expect(obj.hasOwnProperty('message')).toBe(true)
  expect(obj.stack.length > 2).toBe(true)
  expect(obj.message).toBe('sample error.')

  err.test = 'yes.'
  const obj2 = errorkit.objectifyError(err)
  expect(obj2.hasOwnProperty('test')).toBe(true)
  expect(obj2.test).toBe('yes.')
})

test('errorify object.', () => {
  const err = new Error('sample error.')
  err.test = 'yes.'
  const obj = errorkit.objectifyError(err)

  const error = errorkit.errorifyObject(obj)
  expect(error instanceof Error).toBe(true)
  expect(error.hasOwnProperty('stack')).toBe(true)
  expect(error.hasOwnProperty('message')).toBe(true)
  expect(error.hasOwnProperty('test')).toBe(true)
  expect(error.message).toBe('sample error.')
  expect(error.test).toBe('yes.')
})
